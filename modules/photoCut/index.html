<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <style type="text/css">
    canvas {
      cursor: crosshair;
      -webkit-user-select: none;
      -moz-user-select: none;
      outline: 1px solid gray;
    }
  </style>
</head>
<body>

<div>
  <input type="button" value="⤵" onclick="rotateRight()">
  <input type="button" value="⤴" onclick="rotateLeft()">
  <input type="button" value="Done">
</div>

<script src="index.js"></script>

<canvas id="canvas"></canvas>
<canvas id="selectionCanvas" width="160" height="160" style="outline:1px solid red"></canvas>
<script>

  var selectionCanvasContext = selectionCanvas.getContext('2d');

  document.querySelector('#canvas').addEventListener("selection", function(event) {
    var selection = getCanvasSelection();
    selectionCanvasContext.clearRect(0, 0, selectionCanvas.width, selectionCanvas.height);

    if (selection) {
      selectionCanvasContext.drawImage(
          selection.source,
          selection.x, selection.y, selection.width, selection.height, // from
          0, 0, selectionCanvas.width, selectionCanvas.height // to
      );
    }
  });

</script>

</body>
</html>
