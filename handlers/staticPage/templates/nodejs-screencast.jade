extends /layouts/main

block append variables
  - var headTitle = 'Современный учебник Javascript';

  //- layout
  - var sitetoolbar = true
  - var header = true
  - var layout_page_class = "page_contains_header"
  - var mainclass = "main-headered"


block content

  include ./nodejs-screencast-header

  .main(class='main_width-limit-wide').nodejs-screencast-content


    include:simpledown nodejs-screencast.md

    form(data-newsletter-subscribe-form action="/newsletter/subscriptions" method="POST")
      input(type="hidden" value="nodejs" name="slug")
      if user
        input(type="hidden" value=user.email name="email")
      else
        input(type="email" placeholder="me@mail.com" name="email" required)

      input(type="submit" value='Подписаться')

    script.
      (function() {
        var lis = document.querySelectorAll('li[mnemo]');

        for (var i = 0; i < lis.length; i++) {
          var li = lis[i];
          var mnemo = li.getAttribute('mnemo');

          li.insertAdjacentHTML(
            'beforeEnd',

            '<div class="lessons-list__download">' +
              '<div class="lessons-list__popup">' +
                '<ul class="lessons-list__popup-list">' +
                  '<li class="lessons-list__popup-item">' +
                    '<a href="/nodejs-screencast/nodejs-mp4-low/' +
                        mnemo + '.mp4">Компактный размер</a>'+
                  '</li>' +

                  '<li class="lessons-list__popup-item">' +
                    '<a href="/nodejs-screencast/nodejs-mp4/' +
                        mnemo + '.mp4">Высокое качество</a>' +
                  '</li>' +
                '</ul>' +
              '</div>' +
            '</div>'
          );
        }
      })();

    include /blocks/comments