extends /layouts/main

block content

  h1 Результаты поиска

  +b("form").search-form(action="/search/")
    +e.content
      +e.line
        +e.query-wrap
          +b.text-input.__query
            +e('input').control(type="text", name="query" value=searchQuery)
        +e.send-wrap
          +b('button').submit-button.__send(type="submit" name="type" value=searchType) Найти
    +e.footer
      +e.types
        each type, name in searchTypes
          +e('button').type(type="submit" disabled=(name == searchType ? true : null) name="type" value=name)
            = type.title
            = ' (' + (resultsCountPerType[name] || 0)  + ')'

  +b.search-results
    each result in results
      +e.result
        +e.title
          +e('a').title-link(href=result.url)!= result.title
        +e.extract!= result.search
        +e('ul').path
          each crumb in result.breadcrumb
            +e('li').path-step
              +e('a').path-link(href=crumb.url)!= crumb.title


  if results.length < resultsCountPerType[searchType]
    div Показываются первые #{results.length} результатов.

  +b("form").search-form._fixed._hidden(action="/search/")
    +e.content
      +e.line
        +e.query-wrap
          +b.text-input.__query
            +e('input').control(type="text" name="query" value=searchQuery)
        +e.send-wrap
          +b('button').submit-button.__send(type="submit" name="type" value=searchType) Найти

  script(src=script("search"))
  script search.init();
