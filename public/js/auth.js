require=function t(e,s,i){function n(a,r){if(!s[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=s[a]={exports:{}};e[a][0].call(u.exports,function(t){var s=e[a][1][t];return n(s?s:t)},u,u.exports,t,e,s,i)}return s[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({"/root/javascript-nodejs/node_modules/auth/client/authModal.js":[function(t,e){function s(t){o.apply(this,arguments),t=t||{},t.successRedirect||(t.successRedirect=window.location.href);var e=this;t.callback||(t.callback=function(){e.successRedirect()}),this.options=t,this.setContent(u(r)),t.message&&this.showFormMessage(t.message,"info"),this.initEventHandlers()}var i=t("client/xhr"),n=t("client/delegate"),o=t("client/head").Modal,a=t("client/spinner"),r=t("../templates/login-form.jade"),l=t("../templates/register-form.jade"),c=t("../templates/forgot-form.jade"),u=t("client/clientRender");s.prototype=Object.create(o.prototype),n.delegateMixin(s.prototype),s.prototype.successRedirect=function(){window.location.href==this.options.successRedirect?window.location.reload():window.location.href=this.options.successRedirect},s.prototype.clearFormMessages=function(){[].forEach.call(this.elem.querySelectorAll(".text-input_invalid"),function(t){t.classList.remove("text-input_invalid")}),[].forEach.call(this.elem.querySelectorAll(".text-input__err"),function(t){t.remove()}),this.elem.querySelector("[data-notification]").innerHTML=""},s.prototype.request=function(t){var e=i(t);return e.addEventListener("loadstart",function(){var t=this.startRequestIndication();e.addEventListener("loadend",t)}.bind(this)),e},s.prototype.startRequestIndication=function(){this.showOverlay();var t=this,e=this.elem.querySelector('[type="submit"]');if(e){var s=new a({elem:e,size:"small","class":"submit-button__spinner",elemClass:"submit-button_progress"});s.start()}return function(){t.hideOverlay(),s&&s.stop()}},s.prototype.initEventHandlers=function(){this.delegate('[data-switch="register-form"]',"click",function(t){t.preventDefault(),this.setContent(u(l))}),this.delegate('[data-switch="login-form"]',"click",function(t){t.preventDefault(),this.setContent(u(r))}),this.delegate('[data-switch="forgot-form"]',"click",function(t){t.preventDefault(),this.setContent(u(c))}),this.delegate('[data-form="login"]',"submit",function(t){t.preventDefault(),this.submitLoginForm(t.target)}),this.delegate('[data-form="register"]',"submit",function(t){t.preventDefault(),this.submitRegisterForm(t.target)}),this.delegate('[data-form="forgot"]',"submit",function(t){t.preventDefault(),this.submitForgotForm(t.target)}),this.delegate("[data-provider]","click",function(t){t.preventDefault(),this.openAuthPopup("/auth/login/"+t.delegateTarget.dataset.provider)}),this.delegate("[data-action-verify-email]","click",function(t){t.preventDefault();var e=this.request({method:"POST",url:"/auth/reverify"}),s=this;e.addEventListener("success",function(t){200==this.status?s.showFormMessage("Письмо-подтверждение отправлено.","success"):s.showFormMessage(t.result,"error")});var i=new FormData;i.append("email",t.delegateTarget.dataset.actionVerifyEmail),e.send(i)})},s.prototype.submitRegisterForm=function(t){this.clearFormMessages();var e=!1;if(t.elements.email.value||(e=!0,this.showInputError(t.elements.email,"Введите, пожалуста, email.")),t.elements.displayName.value||(e=!0,this.showInputError(t.elements.displayName,"Введите, пожалуста, имя пользователя.")),t.elements.password.value||(e=!0,this.showInputError(t.elements.password,"Введите, пожалуста, пароль.")),!e){var s=this.request({method:"POST",url:"/auth/register",successStatuses:[201,400]}),i=this;s.addEventListener("success",function(e){if(201==this.status)return i.setContent(u(r)),void i.showFormMessage("Сейчас вам придёт email с адреса <code>inform@javascript.ru</code> со ссылкой-подтверждением. Если письмо не пришло в течение минуты, можно <a href='#' data-action-verify-email='"+t.elements.email.value+"'>перезапросить подтверждение</a>.","success");if(400!=this.status)i.showFormMessage("Неизвестный статус ответа сервера","error");else for(var s in e.result.errors)i.showInputError(t.elements[s],e.result.errors[s])});var n=new FormData(t);n.append("successRedirect",this.options.successRedirect),s.send(n)}},s.prototype.submitForgotForm=function(t){this.clearFormMessages();var e=!1;if(t.elements.email.value||(e=!0,this.showInputError(t.elements.email,"Введите, пожалуста, email.")),!e){var s=this.request({method:"POST",url:"/auth/forgot"}),i=this;s.addEventListener("success",function(t){200==this.status?(i.setContent(u(r)),i.showFormMessage(t.result,"success")):i.showFormMessage(t.result,"error")});var n=new FormData(t);n.append("successRedirect",this.options.successRedirect),s.send(n)}},s.prototype.showInputError=function(t,e){t.parentNode.classList.add("text-input_invalid");var s=document.createElement("span");s.className="text-input__err",s.innerHTML=e,t.parentNode.appendChild(s)},s.prototype.showFormMessage=function(t,e){if(-1==["info","error","warning","success"].indexOf(e))throw new Error("Unsupported type: "+e);var s=document.createElement("div");s.className="login-form__"+e,s.innerHTML=t,this.elem.querySelector("[data-notification]").innerHTML="",this.elem.querySelector("[data-notification]").appendChild(s)},s.prototype.submitLoginForm=function(t){this.clearFormMessages();var e=!1;if(t.elements.login.value||(e=!0,this.showInputError(t.elements.login,"Введите, пожалуста, имя или email.")),t.elements.password.value||(e=!0,this.showInputError(t.elements.password,"Введите, пожалуста, пароль.")),!e){var s=this.request({method:"POST",url:"/auth/login/local"}),i=this;s.addEventListener("success",function(t){return 200!=this.status?void i.onAuthFailure(t.result.message):void i.onAuthSuccess()}),s.send(new FormData(t))}},s.prototype.openAuthPopup=function(t){this.authPopup&&!this.authPopup.closed&&this.authPopup.close();var e=800,s=600,i=(window.outerHeight-s)/2,n=(window.outerWidth-e)/2;window.authModal=this,this.authPopup=window.open(t,"authModal","width="+e+",height="+s+",scrollbars=0,top="+i+",left="+n)},s.prototype.onAuthSuccess=function(){this.options.callback()},s.prototype.onAuthFailure=function(t){this.showFormMessage(t||"Отказ в авторизации","error")},e.exports=s},{"../templates/forgot-form.jade":"/root/javascript-nodejs/node_modules/auth/templates/forgot-form.jade","../templates/login-form.jade":"/root/javascript-nodejs/node_modules/auth/templates/login-form.jade","../templates/register-form.jade":"/root/javascript-nodejs/node_modules/auth/templates/register-form.jade","client/clientRender":"/root/javascript-nodejs/node_modules/client/clientRender.js","client/delegate":"/root/javascript-nodejs/node_modules/client/delegate.js","client/head":"client/head","client/spinner":"/root/javascript-nodejs/node_modules/client/spinner.js","client/xhr":"/root/javascript-nodejs/node_modules/client/xhr.js"}],"/root/javascript-nodejs/node_modules/auth/templates/forgot-form.jade":[function(t,e){var s=t("jade/lib/runtime.js");e.exports=function(e){return e&&(e.require=t),function(t){var e=[],i={},n=t||{};return function(t){e.push("");var n=[],o=["block"];i.b=function(s,i){this&&this.block,this&&this.attributes||{};t.call(this,e,n,o,s,i)},i.e=function(t){var e=this&&this.block,n=this&&this.attributes||{};i.b.call({block:function(){e&&e()},attributes:s.merge([n])},t,!0)},i.b.call({block:function(){i.e.call({block:function(){i.e.call({block:function(){i.e.call({block:function(){e.push("Восстановление пароля")},attributes:{"class":"title"}},"h4")},attributes:{"class":"line __header"}}),i.e.call({attributes:{"data-notification":!0,"class":"line __notification"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Имя пользователя или Email:")},attributes:{"for":"forgot-email","class":"label"}},"label"),i.b.call({block:function(){i.e.call({attributes:{id:"forgot-email",name:"email",autofocus:!0,"class":"control"}},"input")},attributes:{"class":"text-input __input"}},"span")},attributes:{"class":"line"}}),i.e.call({block:function(){i.b.call({block:function(){i.e.call({block:function(){e.push("Восстановить пароль")},attributes:{"class":"text"}},"span")},attributes:{type:"submit","class":"submit-button _small __submit"}},"button")},attributes:{"class":"line"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Вход")},attributes:{"data-switch":"login-form","class":"button-link"}},"button"),e.push(" "),i.e.call({block:function(){e.push("/")},attributes:{"class":"separator"}},"span"),e.push(" "),i.e.call({block:function(){e.push("Регистрация")},attributes:{"data-switch":"register-form","class":"button-link"}},"button")},attributes:{"class":"line __footer"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Вход через социальные сети")},attributes:{"class":"social-logins-title"}},"h5"),e.push(" "),i.b.call({block:function(){e.push("Facebook")},attributes:{"data-provider":"facebook","class":"social-login _facebook __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Google+")},attributes:{"data-provider":"google","class":"social-login _google __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Вконтакте")},attributes:{"data-provider":"vkontakte","class":"social-login _vkontakte __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Github")},attributes:{"data-provider":"github","class":"social-login _github __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Яндекс")},attributes:{"data-provider":"yandex","class":"social-login _yandex __social-login"}},"button")},attributes:{"class":"line __social-logins"}}),i.b.call({attributes:{type:"button",title:"закрыть","class":"close-button __close"}},"button")},attributes:{action:"#","data-form":"forgot","class":"form"}},"form")},attributes:{"class":"login-form"}})}.call(this,"bem"in n?n.bem:"undefined"!=typeof bem?bem:void 0),e.join("")}(e)}},{"jade/lib/runtime.js":"/root/javascript-nodejs/node_modules/jade/lib/runtime.js"}],"/root/javascript-nodejs/node_modules/auth/templates/login-form.jade":[function(t,e){var s=t("jade/lib/runtime.js");e.exports=function(e){return e&&(e.require=t),function(t){var e=[],i={},n=t||{};return function(t){e.push("");var n=[],o=["block"];i.b=function(s,i){this&&this.block,this&&this.attributes||{};t.call(this,e,n,o,s,i)},i.e=function(t){var e=this&&this.block,n=this&&this.attributes||{};i.b.call({block:function(){e&&e()},attributes:s.merge([n])},t,!0)},i.b.call({block:function(){i.e.call({block:function(){i.e.call({block:function(){i.e.call({block:function(){e.push("Вход в систему")},attributes:{"class":"title"}},"h4"),i.e.call({block:function(){i.e.call({block:function(){e.push("регистрация")},attributes:{"data-switch":"register-form","class":"button-link __register"}},"button")},attributes:{"class":"header-aside"}})},attributes:{"class":"line __header"}}),i.e.call({attributes:{"data-notification":!0,"class":"line __notification"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Имя пользователя или Email:")},attributes:{"for":"login","class":"label"}},"label"),i.b.call({block:function(){i.e.call({attributes:{id:"login",name:"login","class":"control"}},"input")},attributes:{"class":"text-input __input"}},"span")},attributes:{"class":"line"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Пароль:")},attributes:{"for":"password","class":"label"}},"label"),i.b.call({block:function(){i.e.call({attributes:{id:"password",type:"password",name:"password","class":"control"}},"input")},attributes:{"class":"text-input __input __input_with-aside"}},"span"),i.e.call({block:function(){e.push("Забыли?")},attributes:{"data-switch":"forgot-form","class":"button-link __forgot"}},"button")},attributes:{"class":"line"}}),i.e.call({block:function(){i.b.call({block:function(){i.e.call({block:function(){e.push("Войти")},attributes:{"class":"text"}},"span")},attributes:{type:"submit","class":"submit-button _small __submit"}},"button")},attributes:{"class":"line __footer"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Вход через социальные сети")},attributes:{"class":"social-logins-title"}},"h5"),e.push(" "),i.b.call({block:function(){e.push("Facebook")},attributes:{"data-provider":"facebook","class":"social-login _facebook __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Google+")},attributes:{"data-provider":"google","class":"social-login _google __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Вконтакте")},attributes:{"data-provider":"vkontakte","class":"social-login _vkontakte __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Github")},attributes:{"data-provider":"github","class":"social-login _github __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Яндекс")},attributes:{"data-provider":"yandex","class":"social-login _yandex __social-login"}},"button")},attributes:{"class":"line __social-logins"}}),i.b.call({attributes:{type:"button",title:"закрыть","class":"close-button __close"}},"button")},attributes:{action:"#","class":"form"}},"form")},attributes:{"data-form":"login","class":"login-form"}})}.call(this,"bem"in n?n.bem:"undefined"!=typeof bem?bem:void 0),e.join("")}(e)}},{"jade/lib/runtime.js":"/root/javascript-nodejs/node_modules/jade/lib/runtime.js"}],"/root/javascript-nodejs/node_modules/auth/templates/register-form.jade":[function(t,e){var s=t("jade/lib/runtime.js");e.exports=function(e){return e&&(e.require=t),function(t){var e=[],i={},n=t||{};return function(t){e.push("");var n=[],o=["block"];i.b=function(s,i){this&&this.block,this&&this.attributes||{};t.call(this,e,n,o,s,i)},i.e=function(t){var e=this&&this.block,n=this&&this.attributes||{};i.b.call({block:function(){e&&e()},attributes:s.merge([n])},t,!0)},i.b.call({block:function(){i.e.call({block:function(){i.e.call({block:function(){i.e.call({block:function(){e.push("Регистрация")},attributes:{"class":"title"}},"h4"),i.e.call({block:function(){i.e.call({block:function(){e.push("вход")},attributes:{"data-switch":"login-form","class":"button-link"}},"button")},attributes:{"class":"header-aside"}})},attributes:{"class":"line __header"}}),i.e.call({attributes:{"data-notification":!0,"class":"line __notification"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Email:")},attributes:{"for":"register-email","class":"label"}},"label"),i.b.call({block:function(){i.e.call({attributes:{id:"register-email",name:"email",type:"email",required:!0,autofocus:!0,"class":"control"}},"input")},attributes:{"class":"text-input __input"}},"span")},attributes:{"class":"line"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Имя пользователя:")},attributes:{"for":"register-displayName","class":"label"}},"label"),i.b.call({block:function(){i.e.call({attributes:{id:"register-displayName",name:"displayName",required:!0,"class":"control"}},"input")},attributes:{"class":"text-input __input"}},"span")},attributes:{"class":"line"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Пароль:")},attributes:{"for":"register-password","class":"label"}},"label"),i.b.call({block:function(){i.e.call({attributes:{id:"register-password",type:"password",name:"password",required:!0,"class":"control"}},"input")},attributes:{"class":"text-input __input"}},"span")},attributes:{"class":"line"}}),i.e.call({block:function(){i.b.call({block:function(){i.e.call({block:function(){e.push("Зарегистрироваться")},attributes:{"class":"text"}},"span")},attributes:{type:"submit","class":"submit-button _small submit"}},"button")},attributes:{"class":"line __footer"}}),i.e.call({block:function(){i.e.call({block:function(){e.push("Вход через социальные сети")},attributes:{"class":"social-logins-title"}},"h5"),e.push(" "),i.b.call({block:function(){e.push("Facebook")},attributes:{"data-provider":"facebook","class":"social-login _facebook __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Google+")},attributes:{"data-provider":"google","class":"social-login _google __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Вконтакте")},attributes:{"data-provider":"vkontakte","class":"social-login _vkontakte __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Github")},attributes:{"data-provider":"github","class":"social-login _github __social-login"}},"button"),e.push(" "),i.b.call({block:function(){e.push("Яндекс")},attributes:{"data-provider":"yandex","class":"social-login _yandex __social-login"}},"button")},attributes:{"class":"line __social-logins"}}),i.b.call({attributes:{type:"button",title:"закрыть","class":"close-button __close"}},"button")},attributes:{action:"#","data-form":"register","class":"form"}},"form")},attributes:{"class":"login-form"}})}.call(this,"bem"in n?n.bem:"undefined"!=typeof bem?bem:void 0),e.join("")}(e)}},{"jade/lib/runtime.js":"/root/javascript-nodejs/node_modules/jade/lib/runtime.js"}],"/root/javascript-nodejs/node_modules/bem-jade/index.js":[function(t,e){var s=t("jade/lib/runtime");e.exports=function(t){function e(e,i,n,o,a,r){var l=r||t.default_tag,c=a.length;switch(r||("inline"===a[c-1]?l="span":"list"===a[c-1]&&(l="li"),n.href?l="a":n.for?l="label":n.src&&(l="img")),"list"===a[c-1]&&"li"!==l?e.push("<li>"):"list"!==a[c-1]&&"pseudo-list"!==a[c-1]&&"li"===l?(e.push("<ul>"),a[a.length]="pseudo-list"):"pseudo-list"===a[c-1]&&"li"!==l&&(e.push("</ul>"),a.pop()),a[a.length]=-1!==["a","abbr","acronym","b","br","code","em","font","i","img","ins","kbd","map","samp","small","span","strong","sub","sup","label","p","h1","h2","h3","h4","h5","h6"].indexOf(l)?"inline":-1!==["ul","ol"].indexOf(l)?"list":"block",l){case"img":n.alt&&!n.title&&(n.title=""),n.title&&!n.alt&&(n.alt=n.title),n.alt||(n.alt="");break;case"input":n.type||(n.type="text");break;case"html":e.push("<!DOCTYPE HTML>");break;case"a":n.href||(n.href="#")}e.push("<"+l+s.attrs(s.merge([n]),!0)+">"),i&&i(),-1==["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"].indexOf(l)&&e.push("</"+l+">"),"list"===a[c-1]&&"li"!=l&&e.push("</li>")}return t=t||{},t.prefix=t.prefix||"",t.element=t.element||"__",t.modifier=t.modifier||"_",t.default_tag=t.default_tag||"div",function(s,i,n,o,a){var r=this.block,l=this.attributes||{};if(l.class){var c=l.class;c instanceof Array&&(c=c.join(" ")),c=c.split(" ");var u;try{u=c[0].match(new RegExp("^(((?!"+t.element+"|"+t.modifier+").)+)"))[1]}catch(d){throw new Error("Incorrect bem class: "+c[0])}a?c[0]=i[i.length-1]+t.element+c[0]:(i[i.length]=u,c[0]=c[0]);var h=(a?i[i.length-1]+t.element:"")+u;-1===c.indexOf(h)&&(c[c.length]=h);for(var f=0;f<c.length;f++){var p=c[f];p.match(new RegExp("^(?!"+t.element+")"+t.modifier))?c[f]=h+p:p.match(new RegExp("^"+t.element))&&(c[f]=i[i.length-2]?i[i.length-2]+p:i[i.length-1]+p),c[f].match(new RegExp("^"+h+"($|(?="+t.element+"|"+t.modifier+"))"))&&(c[f]=t.prefix+c[f])}l.class=c.sort().join(" ")}e(s,r,l,i,n,o),a||i.pop(),n.pop()}}},{"jade/lib/runtime":"/root/javascript-nodejs/node_modules/jade/lib/runtime.js"}],"/root/javascript-nodejs/node_modules/browserify/lib/_empty.js":[function(){},{}],"/root/javascript-nodejs/node_modules/client/clientRender.js":[function(t,e){function s(t){t.bem=i}var i=t("bem-jade")();e.exports=function(t,e){return e=e?Object.create(e):{},s(e),t(e)}},{"bem-jade":"/root/javascript-nodejs/node_modules/bem-jade/index.js"}],"/root/javascript-nodejs/node_modules/client/delegate.js":[function(t,e){"use strict";function s(t,e){for(var s=t.target;s;){if(s.matches(e))return s;if(s==t.currentTarget)break;s=s.parentElement}return null}function i(t,e,i,n,o){t.addEventListener(i,function(t){var i=s(t,e);t.delegateTarget=i,i&&n.call(o||this,t)})}t("./polyfill"),i.delegateMixin=function(t){t.delegate=function(t,e,s){i(this.elem,t,e,s,this)}},e.exports=i},{"./polyfill":"/root/javascript-nodejs/node_modules/client/polyfill/index.js"}],"/root/javascript-nodejs/node_modules/client/notify.js":[function(t,e,s){var i=t("humane-js");s.info=i.spawn({addnCls:"humane-libnotify-info",timeout:1e3}),s.error=i.spawn({addnCls:"humane-libnotify-error",timeout:3e3})},{"humane-js":"/root/javascript-nodejs/node_modules/humane-js/humane.js"}],"/root/javascript-nodejs/node_modules/client/polyfill/dom4.js":[function(){var t={matches:Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector,remove:function(){var t=this.parentNode;return t?t.removeChild(this):void 0}};for(var e in t)Element.prototype[e]||(Element.prototype[e]=t[e]);try{new CustomEvent("IE has CustomEvent, but doesn't support constructor")}catch(s){window.CustomEvent=function(t,e){var s;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},s=document.createEvent("CustomEvent"),s.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),s},CustomEvent.prototype=Object.create(window.Event.prototype)}},{}],"/root/javascript-nodejs/node_modules/client/polyfill/index.js":[function(t){t("./dom4")},{"./dom4":"/root/javascript-nodejs/node_modules/client/polyfill/dom4.js"}],"/root/javascript-nodejs/node_modules/client/spinner.js":[function(t,e){function s(t){if(t=t||{},this.elem=t.elem,this.size=t.size||"medium",this.class=t.class?" "+t.class:"",this.elemClass=t.elemClass,"medium"!=this.size&&"small"!=this.size)throw new Error("Unsupported size: "+this.size);this.elem||(this.elem=document.createElement("div"))}s.prototype.start=function(){this.elemClass&&this.elem.classList.toggle(this.elemClass),this.elem.insertAdjacentHTML("beforeend",'<span class="spinner spinner_active spinner_'+this.size+this.class+'"><span class="spinner__dot spinner__dot_1"></span><span class="spinner__dot spinner__dot_2"></span><span class="spinner__dot spinner__dot_3"></span></span>')},s.prototype.stop=function(){this.elem.removeChild(this.elem.querySelector(".spinner")),this.elemClass&&this.elem.classList.toggle(this.elemClass)},e.exports=s},{}],"/root/javascript-nodejs/node_modules/client/xhr-notify.js":[function(t){var e=t("./notify");document.addEventListener("xhrfail",function(t){e.error(t.reason)})},{"./notify":"/root/javascript-nodejs/node_modules/client/notify.js"}],"/root/javascript-nodejs/node_modules/client/xhr.js":[function(t,e){function s(t){function e(t,e){var s=new CustomEvent(t);return s.originalEvent=e,s}function s(t,s){var i=e("fail",s);i.reason=t,o.dispatchEvent(i)}function n(t,s){var i=e("success",s);i.result=t,o.dispatchEvent(i)}var o=new XMLHttpRequest,a=t.method||"GET";o.open(a,t.url,t.sync?!1:!0),o.method=a,t.noGlobalEvents||(o.addEventListener("loadstart",function(t){var s=e("xhrstart",t);document.dispatchEvent(s)}),o.addEventListener("loadend",function(t){var s=e("xhrend",t);document.dispatchEvent(s)}),o.addEventListener("success",function(t){var s=e("xhrsuccess",t);s.result=t.result,document.dispatchEvent(s)}),o.addEventListener("fail",function(t){var s=e("xhrfail",t);s.reason=t.reason,document.dispatchEvent(s)})),t.json&&o.setRequestHeader("Accept","application/json");var r=t.successStatuses||[200];return o.addEventListener("error",function(t){s("Ошибка связи с сервером.",t)}),o.addEventListener("timeout",function(t){s("Превышено максимально допустимое время ожидания ответа от сервера.",t)}),o.addEventListener("abort",function(t){s("Запрос был прерван.",t)}),o.addEventListener("load",function(e){if(!this.status)return void s("Не получен ответ от сервера.",e);if(-1==r.indexOf(this.status))return void s("Ошибка на стороне сервера (код "+this.status+"), попытайтесь позднее",e);var i=this.responseText,o=this.getResponseHeader("Content-Type");if(o.match(/^application\/json/)||t.json)try{i=JSON.parse(i)}catch(e){return void s("Некорректный формат ответа от сервера",e)}n(i,e)}),i(o),o}function i(t){var e=t.send;t.send=function(t){~["GET","HEAD","OPTIONS"].indexOf(this.method)||(t instanceof FormData&&t.append("_csrf",window.csrf),"[object Object]"=={}.toString.call(t)&&(t._csrf=window.csrf),t||(t={_csrf:window.csrf})),"[object Object]"=={}.toString.call(t)&&(this.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t=JSON.stringify(t)),e.call(this,t)}}t("./polyfill"),t("./xhr-notify"),e.exports=s},{"./polyfill":"/root/javascript-nodejs/node_modules/client/polyfill/index.js","./xhr-notify":"/root/javascript-nodejs/node_modules/client/xhr-notify.js"}],"/root/javascript-nodejs/node_modules/humane-js/humane.js":[function(t,e){!function(t,s,i){"undefined"!=typeof e?e.exports=i(t,s):"function"==typeof define&&"object"==typeof define.amd?define(i):s[t]=i(t,s)}("humane",this,function(){var t=window,e=document,s={on:function(e,s,i){"addEventListener"in t?e.addEventListener(s,i,!1):e.attachEvent("on"+s,i)},off:function(e,s,i){"removeEventListener"in t?e.removeEventListener(s,i,!1):e.detachEvent("on"+s,i)},bind:function(t,e){return function(){t.apply(e,arguments)}},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},config:function(t,e){return null!=t?t:e},transSupport:!1,useFilter:/msie [678]/i.test(navigator.userAgent),_checkTransition:function(){var t=e.createElement("div"),s={webkit:"webkit",Moz:"",O:"o",ms:"MS"};for(var i in s)i+"Transition"in t.style&&(this.vendorPrefix=s[i],this.transSupport=!0)}};s._checkTransition();var i=function(e){e||(e={}),this.queue=[],this.baseCls=e.baseCls||"humane",this.addnCls=e.addnCls||"",this.timeout="timeout"in e?e.timeout:2500,this.waitForMove=e.waitForMove||!1,this.clickToClose=e.clickToClose||!1,this.timeoutAfterMove=e.timeoutAfterMove||!1,this.container=e.container;try{this._setupEl()}catch(i){s.on(t,"load",s.bind(this._setupEl,this))}};return i.prototype={constructor:i,_setupEl:function(){var t=e.createElement("div");if(t.style.display="none",!this.container){if(!e.body)throw"document.body is null";this.container=e.body}this.container.appendChild(t),this.el=t,this.removeEvent=s.bind(function(){this.timeoutAfterMove?setTimeout(s.bind(this.remove,this),this.timeout):this.remove()},this),this.transEvent=s.bind(this._afterAnimation,this),this._run()},_afterTimeout:function(){s.config(this.currentMsg.waitForMove,this.waitForMove)?this.removeEventsSet||(s.on(e.body,"mousemove",this.removeEvent),s.on(e.body,"click",this.removeEvent),s.on(e.body,"keypress",this.removeEvent),s.on(e.body,"touchstart",this.removeEvent),this.removeEventsSet=!0):this.remove()},_run:function(){if(!this._animating&&this.queue.length&&this.el){this._animating=!0,this.currentTimer&&(clearTimeout(this.currentTimer),this.currentTimer=null);var t=this.queue.shift(),e=s.config(t.clickToClose,this.clickToClose);e&&(s.on(this.el,"click",this.removeEvent),s.on(this.el,"touchstart",this.removeEvent));var i=s.config(t.timeout,this.timeout);i>0&&(this.currentTimer=setTimeout(s.bind(this._afterTimeout,this),i)),s.isArray(t.html)&&(t.html="<ul><li>"+t.html.join("<li>")+"</ul>"),this.el.innerHTML=t.html,this.currentMsg=t,this.el.className=this.baseCls,s.transSupport?(this.el.style.display="block",setTimeout(s.bind(this._showMsg,this),50)):this._showMsg()}},_setOpacity:function(t){if(s.useFilter)try{this.el.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=100*t}catch(e){}else this.el.style.opacity=String(t)},_showMsg:function(){var t=s.config(this.currentMsg.addnCls,this.addnCls);if(s.transSupport)this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-animate";else{var e=0;this.el.className=this.baseCls+" "+t+" "+this.baseCls+"-js-animate",this._setOpacity(0),this.el.style.display="block";var i=this,n=setInterval(function(){1>e?(e+=.1,e>1&&(e=1),i._setOpacity(e)):clearInterval(n)},30)}},_hideMsg:function(){var t=s.config(this.currentMsg.addnCls,this.addnCls);if(s.transSupport)this.el.className=this.baseCls+" "+t,s.on(this.el,s.vendorPrefix?s.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent);else var e=1,i=this,n=setInterval(function(){e>0?(e-=.1,0>e&&(e=0),i._setOpacity(e)):(i.el.className=i.baseCls+" "+t,clearInterval(n),i._afterAnimation())},30)},_afterAnimation:function(){s.transSupport&&s.off(this.el,s.vendorPrefix?s.vendorPrefix+"TransitionEnd":"transitionend",this.transEvent),this.currentMsg.cb&&this.currentMsg.cb(),this.el.style.display="none",this._animating=!1,this._run()},remove:function(t){var i="function"==typeof t?t:null;s.off(e.body,"mousemove",this.removeEvent),s.off(e.body,"click",this.removeEvent),s.off(e.body,"keypress",this.removeEvent),s.off(e.body,"touchstart",this.removeEvent),s.off(this.el,"click",this.removeEvent),s.off(this.el,"touchstart",this.removeEvent),this.removeEventsSet=!1,i&&this.currentMsg&&(this.currentMsg.cb=i),this._animating?this._hideMsg():i&&i()},log:function(t,e,s,i){var n={};if(i)for(var o in i)n[o]=i[o];if("function"==typeof e)s=e;else if(e)for(var o in e)n[o]=e[o];return n.html=t,s&&(n.cb=s),this.queue.push(n),this._run(),this},spawn:function(t){var e=this;return function(s,i,n){return e.log.call(e,s,i,n,t),e}},create:function(t){return new i(t)}},new i})},{}],"/root/javascript-nodejs/node_modules/jade/lib/runtime.js":[function(t,e,s){"use strict";function i(t){return null!=t&&""!==t}function n(t){return Array.isArray(t)?t.map(n).filter(i).join(" "):t}s.merge=function o(t,e){if(1===arguments.length){for(var s=t[0],n=1;n<t.length;n++)s=o(s,t[n]);return s}var a=t["class"],r=e["class"];(a||r)&&(a=a||[],r=r||[],Array.isArray(a)||(a=[a]),Array.isArray(r)||(r=[r]),t["class"]=a.concat(r).filter(i));for(var l in e)"class"!=l&&(t[l]=e[l]);return t},s.joinClasses=n,s.cls=function(t,e){for(var i=[],o=0;o<t.length;o++)i.push(e&&e[o]?s.escape(n([t[o]])):n(t[o]));var a=n(i);return a.length?' class="'+a+'"':""},s.attr=function(t,e,i,n){return"boolean"==typeof e||null==e?e?" "+(n?t:t+'="'+t+'"'):"":0==t.indexOf("data")&&"string"!=typeof e?" "+t+"='"+JSON.stringify(e).replace(/'/g,"&apos;")+"'":i?" "+t+'="'+s.escape(e)+'"':" "+t+'="'+e+'"'},s.attrs=function(t,e){var i=[],o=Object.keys(t);if(o.length)for(var a=0;a<o.length;++a){var r=o[a],l=t[r];"class"==r?(l=n(l))&&i.push(" "+r+'="'+l+'"'):i.push(s.attr(r,l,!1,e))}return i.join("")},s.escape=function(t){var e=String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return e===""+t?t:e},s.rethrow=function a(e,s,i,n){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&s||n))throw e.message+=" on line "+i,e;try{n=n||t("fs").readFileSync(s,"utf8")}catch(o){a(e,null,i)}var r=3,l=n.split("\n"),c=Math.max(i-r,0),u=Math.min(l.length,i+r),r=l.slice(c,u).map(function(t,e){var s=e+c+1;return(s==i?"  > ":"    ")+s+"| "+t}).join("\n");throw e.path=s,e.message=(s||"Jade")+":"+i+"\n"+r+"\n\n"+e.message,e}},{fs:"/root/javascript-nodejs/node_modules/browserify/lib/_empty.js"}],"auth/client":[function(t,e,s){s.AuthModal=t("./authModal")},{"./authModal":"/root/javascript-nodejs/node_modules/auth/client/authModal.js"}]},{},[]);